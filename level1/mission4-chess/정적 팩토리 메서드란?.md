# 정적 팩토리 메서드란?

### 정적 팩토리 메서드란?

객체를 생성할 때 생성자를 통해 생성하는 것이 아니라, 정적(static) 메서드(method)를 이용해 생성하는 것을 뜻한다.

이렇게 생성이 아니라

`MockItem mockItem = new MockItem("새로운 객체 생성");`

이렇게 생성하는 것이다.

`MockItem mockItem = MockItem.of(”새로운 객체 생성”);`

왜 new 생성자를 냅두고 왜 정적 팩토리 메서드를 이용하는 것일까?

객체를 생성하는 역할은 자바에서 제공하는 "생성자"가 하는데, 왜 정적 팩토리 메서드를 따로 만들어서 객체를 생성하는 것일까?

생성자와 정적 팩토리 메서드는 객체를 생성한다는 같은 역할을 하고 있지만 그 활용도는 엄연히 차이가 난다. 실제로 정적 팩토리 메서드가 어떤 면에서 생성자보다 우위를 차지하고 있는지 하나씩 알아보자.

1. **이름을 가질 수 있다.**
2. **호출할 때마다 새로운 객체를 생성할 필요가 없다.**
    
    불변클래스(immutable class)는 인스턴스를 미리 만들어두거나, 새로 생성한 인스턴스를 캐싱해서 재활용하기 때문에 불필요한 객체생성을 줄일 수 있다.
    
    정적 팩토리 메소드 + 캐싱구조를 이용하면 매번 새로운 객체를 만들 필요가 없다. 
    
3. **하위 자료형 객체를 반환할 수 있다.**
4. **객체 생성을 캡슐화 할 수 있다.** 

### 정적 팩토리 메서드 예시

**LocalTime 클래스의 `of` 메서드**

enum의 요소를 조회할 때 사용하는 `valueOf`

미리 생성된 객체를 조회하는 메서드이기 때문에 팩토리의 역할을 한다고 볼 수는 없지만, 외부에서 원하는 객체를 반환해주고 있으므로 결과적으로는 정적 팩토리 메서드라고 간주해도 좋다.

```
public enum Color {
  RED,
  BLUE;
}
...
Color redColor = Color.valueOf("RED");
Color blueColor = Color.valueOf("BLUE");
```

**자바에서의 정적 팩토리 메서드 사용 예시**

자바 1.8부터 제공된 Optional은 정적 팩토리 메서드를 정석으로 보여주는 객체이다. 

앞서 정적 팩토리 메서드는 객체를 생성하는 메서드라고 정의했었는데

Optional은 "new" 키워드 대신 "of()" 메서드를 이용해 객체를 만들 수 있게 설계되었다.

**정적 팩토리 메서드 단점**

단점은 바로 정적 팩토리 메서드를 적용하는 경우에는 상속을 이용한 확장이 불가능하다.

**정적 팩토리 메서드 네이밍 컨벤션**

- `from` : 하나의 매개 변수를 받아서 객체를 생성
- `of` : 여러개의 매개 변수를 받아서 객체를 생성
- `getInstance` | `instance` : 인스턴스를 생성. 이전에 반환했던 것과 같을 수 있음.
- `newInstance` | `create` : 새로운 인스턴스를 생성
- `get[OtherType]` : 다른 타입의 인스턴스를 생성. 이전에 반환했던 것과 같을 수 있음.
- `new[OtherType]` : 다른 타입의 새로운 인스턴스를 생성.