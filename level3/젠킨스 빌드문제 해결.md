# 젠킨스 빌드문제 해결

1. **빌드 하다가 메모리 설정으로 실패**
    - 젠킨스는 jvm 위에서 움직인다.
    - 젠킨스 자체에서 사용 가능한 heap memory 용량을 전체(jvm에서 사용할 수 있는 용량)의 50% 로 제한한다.
    - 젠킨스 설정 파일에서 사용가능한 memory 용량을 조절할 수 있다. 기본 설정 256메가로 되어있었음.
    - 스왑메모리 설정
        - 실제 메모리가 가득차고 더 많은 메모리가 필요할 때 디스크 공간으로 대체하는 것.
        - 따라서 메모리보다 하드디스크를 사용하기때문에 속도가 현저히 떨어진다.
        - [https://scbyun.com/984](https://scbyun.com/984)
        - * 메모리계층 구조 레지스터, 캐시, 메모리, 하드디스크
        - 커널은 실제 메모리에 올라와 있는 메모리 블록들 중에서 당장 쓰이지 않는 것을 디스크에 저장하여, 사용 가능한 메모리 영역을 늘립니다
        - free 명령어로 리눅스 OS 메모리 확인.
        - dd 명령어를 이용하여 null 문자로 채워진 대용량 파일을 만든다.
        - swap파일은 보통, RAM 메모리의 1.5~2배 정도로 설정하는 것을 권장한다고 합니다.
        - 파일을 만들고, 퍼미션을 600으로 변경
        - swap포맷으로 변환한다.
        - swa파일을 시스템상에 등록한다.
        - swap 파일을 영구 등록한다.
        - free -h 명령어로 swap 파일이 정상적으로 등록되었는지 확인한다.
        
        ```
        sudo dd if=/dev/zero of=/swapfile bs=128M count=32
        ```
        
        count: 메모리 크기
        
        bs: 블록 사이즈
        
        [https://blog.jiniworld.me/33](https://blog.jiniworld.me/33)
        
        [https://devroach.tistory.com/32](https://devroach.tistory.com/32)
        
2. **디스크 용량 부족으로 실패**
    
    왜? 스왑메모리 등록을 해놨더니 8기가 중 4기가나 디스크 용량으로 올라감…
    
    나머지 4기가로 jvm 깔고, 젠킨스 깔고, ubuntu 플러그인깔고 하니까 금새 터진 것이다.
    
    - 로그 삭제
    - 캐시 삭제
    - 용량 늘리기
    - 스왑 메모리 설정 변경

**해결법 → ec2 하드디스크 16기가로 늘려줌**