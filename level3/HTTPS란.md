# HTTPS

- HTTPS란 무엇일까?
    - 먼저 HTTP에 대해 알아보자.
    - HyperText Transfet Protocol로 WWW상에서 정보를 주고받는 프로토콜이다.
    - 클라이언트와 서버간의 자원을 주고받을 때 쓰는 통신 규약.
    - http는 텍스트 교환이다. 이를 가로챈다면? 내용이 노출된다.
    - 그래서 이러한 문제를 해결하고자 HTTPS 프로토콜이 나왔다.
    - HTTPS : HTTP + S(Secure Socket)

- SSL/TLS란?
    - application layer랑 transport layer 사이에 보안 채널을 형성해주는 통신 암호화 프로토콜이다.
    - SSL이 적용되지 않은 경우, 평문이 그대로 전송됨. 만일 제 3자가 통신 패킷을 탈취하는 경우, 그 내용을 쉽게 확인할 수 있다. 예) 사용자 개인 정보, 로그인, 회원가입 정보등 민감한 정보라면 … 큰일이다!
    - SSL을 사용한다면 요청을 암호화해서 보내므로 통신 패킷이 탈취되더라도 복호화 키가 없으면 원래 내용을 알 수 없다.
    - TLS는 SSL의 보안취약점을 보완한 통신 보안 프로토콜이다.
    - SSL은 3.0을 마지막으로 금지되었다.
    

### HTTPS 암호화 원리는?

- 대칭키 vs 비대칭키
    - 대칭키: 암호화에 쓰이는 키와 복호화에 쓰이는 키가 동일하다.
    - 비대칭키: 공개키와 개인키(비밀키) 2가지 키를 이용한다.
        - 공개키는 누구나 획득할 수 있다. 클라이언트가 이 키를 가지고 데이터를 암호화해서 전송한다.
        - 개인키(비밀키)는 공개키로 암호화된 데이터를 복호화 할 수 있는 키로써 자신(서버)만이 가지고 있는 키이다.
        - 안전하게 데이터를 주고받을 수 있지만, 속도가 느리다는 단점이 있다.
- 공개키(비대칭키) + 대칭키가 섞인 암호화 방식이다.
    
    **서버의 인증서 등록 과정**
    
    1. 애플리케이션 서버(A)를 만드는 기업은 HTTPS를 적용하기 위해서 공개키와 개인키를 만든다. 
    2. 그다음에 신뢰할 수 있는 CA기업을 선택하고 그 기업에 내 공개키를 관리해달라고 계약하고 돈을 지불한다.
    3. 계약을 완료한 CA기업은 CA기업만의 공개키와 개인키가 있다.
        
        CA기업은 CA기업의 이름과 A서버의 공개키, 공개키 암호화 방법 등의 정보를 담은 인증서를 만들고, 해당 인증서를 CA기업의 개인키로 암호화해서 A서버에게 전송한다.
        
        ---
        
    
    **클라이언트와 서버의 HTTPS 통신 과정**
    
    1. A서버는 암호화된 인증서를 갖게 되었다. 이제 A서버는 A서버의 공개키로 암호화 된 HTTPS 요청이 아닌 요청이 오면 이 암호화된 인증서를 클라이언트에게 준다.
    2. 이제 클라이언트 입장에서!! A서버로 index.html 파일을 달라고 요청을 한다. A서버가 주는거임 그러면 HTTPS 요청이 아니기 때문에 CA 기업이 A서버의 정보를 CA기업의 개인키로 암호화한 인증서를 받게 된다.
    3. 세계적으로 신뢰할 수 있는 CA기업의 공개키는 브라우저가 이미 알고있다.
    4. 브라우저가 CA기업 리스트를 쭉 탐색하면서 인증서에 적혀있는 CA기업 이름이 같으면 해당 CA기업의 공개키를 이미 알고 있는 브라우저는 해독할 수 있다. 짜잔. 해독해서 A서버의 공개키를 얻는다.
    5. A서버와 통신할 때는 A서버의 공개키로 대칭키를 암호화해서 request를 날린다.
    6. 이제 이 대칭키를 A서버는 자신의 개인키로 복호화해서 이 대칭키를 가지고
    7. request 를 주고받는다.