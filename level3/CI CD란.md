# CI/CD란?

## CI/CD 적용 전 터놓고의 기존 개발과 배포 과정

1. 터놓고의 개발자들이 local 환경에서 개발하여 코드를 수정한다.
2. 각 feat 브랜치에 코드를 push한다.
3. ternoko github에 PR을 날린다.
4. 코드리뷰 후 develop 브랜치에 머지한다. 
5. develop 브랜치에 머지가 되면, 최종 배포 브랜치에 머지한다. 

### 기존 개발과 배포 과정에서 겪은 문제점

시나리오)

앤지: restDocs 개발할게!

바니: Slack 로그인 개발할게!

수달: CustomException 개발할게!

그런데 여기서 생긴 문제점..!

다들 공통적으로 MemberService 코드를 수정하게 되었다고 가정해보자…!

앤지: 내 feat 브랜치에서 develop 브랜치로 PR 날릴게~

바니: 내 feat 브랜치에서 develop 브랜치로 PR 날릴게~

수달: 내 feat 브랜치에서 develop 브랜치로 PR 날릴게~

두둥 일단 터놓고의 개발자들은 앤지의 PR을 리뷰한다.

앤지는 리뷰를 반영한다. 그리고 머지 요청을한다.

머지 담당자는 해당 작업내용이 테스트가 깨지지 않는지 직접 코드를 pull받아서 테스트를 돌린후, 머지를한다.

머지가 끝나면 배포 담당자는 머지된 내용을 직접 빌드하고 빌드파일을 배포 서버에 올린후 실행시킨다.

위 일련의 과정은 자동화 될 수 있는 반복작업이다.

그래서 나온 것이 바로바로 이 CI/CD 개념이다.

## CI/CD란?

### CI란?

CI는 간단히 요약하자면 `빌드/테스트 자동화 과정` 과정입니다. 

CI는 개발자를 위한 자동화 프로세스인 `지속적인 통합(Continuous Integration)`을 의미합니다.

CI를 성공적으로 구현할 경우 애플리케이션에 대한 새로운 코드 변경 사항이 정기적으로 빌드 및 테스트되어 공유 리포지토리에 통합되므로 여러 명의 개발자가 동시에 애플리케이션 개발과 관련된 코드 작업을 할 경우 서로 충돌할 수 있는 문제를 해결할 수 있습니다.

지속적 통합의 실행은 소스/버전 관리 시스템에 대한 변경 사항을 정기적으로 커밋하여 모든 사람에게 동일 작업 기반을 제공하는 것으로 시작합니다. 

커밋할 때마다 빌드와 일련의 자동 테스트가 이루어져 동작을 확인하고 변경으로 인해 문제가 생기는 부분이 없도록 보장합니다. 

지속적 통합은 그 자체로 유익하지만 CI/CD 파이프라인을 구현하기 위한 첫 번째 단계이기도 합니다.

### CD란?

`CD`는 간단히 말하면 배포 자동화 과정입니다. CD는 `지속적인 서비스 제공(Continuous Delivery)` 또는 `지속적인 배포(Continuous Deployment)`를 의미하며 이 두 용어는 상호 교환적으로 사용됩니다. 두 가지 의미 모두 파이프라인의 추가 단계에 대한 자동화를 뜻하지만 때로는 얼마나 많은 자동화가 이루어지고 있는지를 설명하기 위해 별도로 사용되기도 합니다.

`지속적 배포`는 빌드, 테스트 및 배포 단계를 자동화하는 DevOps 방식을 논리적 극한까지 끌어 올립니다. 코드 변경이 파이프라인의 이전 단계를 모두 성공적으로 통과하면 수동 개입 없이 해당 변경 사항이 프로덕션에 자동으로 배포됩니다. 지속적 배포를 채택하면 품질 저하 없이 최대한 빨리 사용자에게 새로운 기능을 제공할 수 있습니다.

`지속적 배포`는 또한 성숙하고 입증된 지속적 통합 및 지속적인 전달 단계를 기반으로 합니다. 간단한 코드 변경이 정기적으로 마스터에 커밋되고, 자동화된 빌드 및 테스트 프로세스를 거치며 다양한 사전 프로덕션 환경으로 승격되며, 문제가 발견되지 않으면 최종적으로 배포됩니다. 강력하고 신뢰할 수 있는 자동화 배포 파이프라인을 구축하면 하루에도 여러 번 이루어지는 릴리스가 특별하지 않은 일상이 됩니다.

![https://blog.kakaocdn.net/dn/ckMQmf/btreLLPDmsL/toxwM0zsTV38PrftEhmbt1/img.png](https://blog.kakaocdn.net/dn/ckMQmf/btreLLPDmsL/toxwM0zsTV38PrftEhmbt1/img.png)

## CI/CD 적용 후 터놓고 개발 배포 흐름

1. 터놓고 개발자들이 개발하여 feat브랜치에 코드를 push합니다.

1. ternoko github에서 develop 브랜치로 pr을 날립니다. 

3. 개발자들이 pr을 보고 코드리뷰를 진행하고, 담당 개발자가 리뷰를 반영합니다.

1. 머지 담당자가 pr을 develop 브랜치로 머지합니다.
2. webhook 발생!! jenkins 서버가 자동으로 빌드, 테스트 진행합니다.
3. jenkins서버가 (스크립트실행)  알아서 jar파일을 Develop서버로 옮기고 실행까지 해준당.
4. Develop서버에서 기능 테스트가 끝난 후, 해당 기능을 release브랜치로 push하면 5~6 과정이 일어나 자동으로 운영서버로 배포가 된다. 

**ref**

[https://seosh817.tistory.com/104](https://seosh817.tistory.com/104)